<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COPSOQ II - Teste Completo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-hover: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #334155;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(180deg, rgba(99, 102, 241, 0.1) 0%, transparent 100%);
            padding: 1.5rem 2rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .header h1 {
            font-size: 1.75rem;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .test-badge {
            display: inline-block;
            background: var(--warning);
            color: #000;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
        }

        .tab {
            flex: 1;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .tab:hover {
            background: var(--bg-hover);
        }

        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--text-primary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Toolbar */
        .toolbar {
            background: var(--bg-card);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .toolbar-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .toolbar-group label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--bg-hover);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        .btn-success {
            background: var(--secondary);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: #000;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 0.35rem 0.75rem;
            font-size: 0.75rem;
        }

        select,
        input[type="text"],
        input[type="number"] {
            background: var(--bg-hover);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-size: 0.875rem;
        }

        select:focus,
        input:focus {
            border-color: var(--primary);
            outline: none;
        }

        /* Progress */
        .progress-bar {
            background: var(--bg-card);
            padding: 0.75rem 2rem;
            border-bottom: 1px solid var(--border);
        }

        .progress-track {
            height: 8px;
            background: var(--bg-hover);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-3);
            border-radius: 4px;
            transition: width 0.3s;
            width: 0%;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Container */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Endpoints Panel */
        .endpoints-panel {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }

        .endpoints-panel h3 {
            font-size: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .endpoint-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: var(--bg-hover);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            font-family: monospace;
            font-size: 0.8rem;
        }

        .endpoint-method {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.7rem;
        }

        .endpoint-method.get {
            background: var(--secondary);
            color: white;
        }

        .endpoint-method.post {
            background: var(--primary);
            color: white;
        }

        .endpoint-path {
            flex: 1;
            color: var(--text-primary);
        }

        .endpoint-desc {
            color: var(--text-muted);
            font-family: 'Inter', sans-serif;
        }

        /* Domain Section */
        .domain-section {
            margin-bottom: 2rem;
        }

        .domain-header {
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.75rem;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .domain-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .domain-EL {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .domain-OTC {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .domain-RSL {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .domain-ITI {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .domain-VLT {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .domain-SBE {
            background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);
        }

        .domain-CO {
            background: linear-gradient(135deg, #f12711 0%, #f5af19 100%);
        }

        .domain-info h2 {
            font-size: 1rem;
            font-weight: 600;
        }

        .domain-info span {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        /* Question Card */
        .question-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border: 1px solid var(--border);
            transition: all 0.2s;
        }

        .question-card:hover {
            border-color: var(--primary);
        }

        .question-card.answered {
            border-color: var(--secondary);
            background: rgba(16, 185, 129, 0.05);
        }

        .question-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .question-number {
            background: var(--bg-hover);
            padding: 0.15rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            color: var(--text-secondary);
        }

        .dimension-tag {
            font-size: 0.65rem;
            color: var(--primary-light);
        }

        .question-text {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .option {
            flex: 1;
            min-width: 90px;
            position: relative;
        }

        .option input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .option label {
            display: block;
            padding: 0.5rem;
            background: var(--bg-hover);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            border: 2px solid transparent;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .option label:hover {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary-light);
        }

        .option input:checked+label {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* Submit */
        .submit-section {
            text-align: center;
            padding: 2rem 0;
        }

        .submit-btn {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(99, 102, 241, 0.5);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s;
            font-size: 0.875rem;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success {
            background: var(--secondary);
            color: white;
        }

        .toast.error {
            background: var(--danger);
            color: white;
        }

        .toast.info {
            background: var(--primary);
            color: white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 2rem;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-item {
            background: var(--bg-hover);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-score {
            font-size: 1.25rem;
            font-weight: 700;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .close-btn {
            background: var(--bg-hover);
            color: var(--text-primary);
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            display: block;
            margin: 1rem auto 0;
        }

        .close-btn:hover {
            background: var(--primary);
        }

        /* JSON Display */
        .json-display {
            background: #0d1117;
            border-radius: 8px;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.75rem;
            color: #7ee787;
            max-height: 300px;
            overflow: auto;
            white-space: pre-wrap;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.25rem;
            }

            .container {
                padding: 1rem;
            }

            .options {
                flex-direction: column;
            }

            .option {
                min-width: 100%;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                min-width: 50%;
            }
        }
    </style>
</head>

<body>
    <header class="header">
        <h1>üß† COPSOQ II - Teste Completo</h1>
        <p>Frontend com dados embutidos + conex√£o opcional com Backend</p>
        <span class="test-badge">‚ö†Ô∏è MODO DE TESTE - Prefixo TEST_ nos dados</span>
    </header>

    <!-- Tabs -->
    <div class="tabs">
        <div class="tab active" onclick="switchTab('questionnaire')">üìù Question√°rio</div>
        <div class="tab" onclick="switchTab('endpoints')">üîå Endpoints API</div>
        <div class="tab" onclick="switchTab('data')">üì¶ Dados JSON</div>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
        <div class="toolbar-group">
            <label>Vers√£o:</label>
            <select id="versionSelect" onchange="loadVersion()">
                <option value="curta_br">üáßüá∑ Curta Brasileira (40 itens)</option>
                <option value="media_pt">üáµüáπ M√©dia Portuguesa (76 itens)</option>
            </select>
        </div>
        <div class="toolbar-group">
            <label>Modo:</label>
            <select id="modeSelect" onchange="setMode()">
                <option value="local">üíæ Local (sem backend)</option>
                <option value="api">üåê API (com backend)</option>
            </select>
        </div>
        <div class="toolbar-group">
            <button class="btn btn-success" onclick="autoFillRandom()">üé≤ Preencher Aleat√≥rio</button>
            <button class="btn btn-warning" onclick="autoFillMiddle()">‚û°Ô∏è Tudo no Meio</button>
            <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è Limpar</button>
        </div>
        <div class="toolbar-group" id="apiConfig" style="display: none;">
            <input type="text" id="apiUrl" value="http://localhost:8000/api/v1" style="width: 220px;">
            <button class="btn btn-primary btn-sm" onclick="testAPI()">Testar API</button>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress-track">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text">
            <span id="progressText">0 de 40 perguntas respondidas</span>
            <span id="progressPercent">0%</span>
        </div>
    </div>

    <!-- Tab: Questionnaire -->
    <div class="tab-content active" id="tab-questionnaire">
        <div class="container">
            <div id="questionnaire"></div>
            <div class="submit-section">
                <button class="submit-btn" onclick="submitQuestionnaire()">
                    üìä Calcular Resultados
                </button>
            </div>
        </div>
    </div>

    <!-- Tab: Endpoints -->
    <div class="tab-content" id="tab-endpoints">
        <div class="container">
            <div class="endpoints-panel">
                <h3>üîê Autentica√ß√£o</h3>
                <div class="endpoint-item">
                    <span class="endpoint-method post">POST</span>
                    <span class="endpoint-path">/api/v1/auth/request-otp</span>
                    <span class="endpoint-desc">Solicitar c√≥digo OTP via WhatsApp</span>
                </div>
                <div class="endpoint-item">
                    <span class="endpoint-method post">POST</span>
                    <span class="endpoint-path">/api/v1/auth/login</span>
                    <span class="endpoint-desc">Login com telefone + c√≥digo OTP</span>
                </div>
            </div>

            <div class="endpoints-panel">
                <h3>üìã Question√°rios</h3>
                <div class="endpoint-item">
                    <span class="endpoint-method get">GET</span>
                    <span class="endpoint-path">/api/v1/questionarios/</span>
                    <span class="endpoint-desc">Listar question√°rios ativos</span>
                </div>
                <div class="endpoint-item">
                    <span class="endpoint-method get">GET</span>
                    <span class="endpoint-path">/api/v1/questionarios/{id}</span>
                    <span class="endpoint-desc">Detalhes de um question√°rio</span>
                </div>
                <div class="endpoint-item">
                    <span class="endpoint-method get">GET</span>
                    <span class="endpoint-path">/api/v1/questionarios/{id}/perguntas</span>
                    <span class="endpoint-desc">Perguntas do question√°rio</span>
                </div>
            </div>

            <div class="endpoints-panel">
                <h3>üìù Respostas</h3>
                <div class="endpoint-item">
                    <span class="endpoint-method post">POST</span>
                    <span class="endpoint-path">/api/v1/respostas/</span>
                    <span class="endpoint-desc">Enviar respostas (dispara diagn√≥stico)</span>
                </div>
            </div>

            <div class="endpoints-panel">
                <h3>üìä Diagn√≥sticos</h3>
                <div class="endpoint-item">
                    <span class="endpoint-method get">GET</span>
                    <span class="endpoint-path">/api/v1/diagnosticos/me</span>
                    <span class="endpoint-desc">Meus diagn√≥sticos</span>
                </div>
                <div class="endpoint-item">
                    <span class="endpoint-method get">GET</span>
                    <span class="endpoint-path">/api/v1/diagnosticos/{id}</span>
                    <span class="endpoint-desc">Detalhes de um diagn√≥stico</span>
                </div>
            </div>

            <div class="endpoints-panel">
                <h3>üìà Relat√≥rios</h3>
                <div class="endpoint-item">
                    <span class="endpoint-method post">POST</span>
                    <span class="endpoint-path">/api/v1/relatorios/gerar</span>
                    <span class="endpoint-desc">Gerar relat√≥rio organizacional/setorial</span>
                </div>
                <div class="endpoint-item">
                    <span class="endpoint-method get">GET</span>
                    <span class="endpoint-path">/api/v1/relatorios/{id}</span>
                    <span class="endpoint-desc">Detalhes de um relat√≥rio</span>
                </div>
            </div>

            <div class="endpoints-panel">
                <h3>üè¢ Organiza√ß√µes</h3>
                <div class="endpoint-item">
                    <span class="endpoint-method get">GET</span>
                    <span class="endpoint-path">/api/v1/organizacoes/</span>
                    <span class="endpoint-desc">Listar organiza√ß√µes</span>
                </div>
                <div class="endpoint-item">
                    <span class="endpoint-method post">POST</span>
                    <span class="endpoint-path">/api/v1/organizacoes/</span>
                    <span class="endpoint-desc">Criar organiza√ß√£o (admin)</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab: Data -->
    <div class="tab-content" id="tab-data">
        <div class="container">
            <div class="endpoints-panel">
                <h3>üì¶ Dados do Question√°rio Atual</h3>
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 1rem;">
                    Esses dados est√£o embutidos no frontend e s√£o os mesmos dos scripts de seed do MongoDB.
                </p>
                <div class="json-display" id="jsonDisplay"></div>
            </div>

            <div class="endpoints-panel">
                <h3>üì§ Payload de Envio</h3>
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 1rem;">
                    Formato do JSON enviado para POST /respostas/
                </p>
                <div class="json-display" id="payloadDisplay">// Responda algumas perguntas para ver o payload</div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="resultsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìä Resultados do COPSOQ II</h2>
                <p style="color: var(--text-secondary);" id="resultSubtitle"></p>
            </div>
            <div id="resultsContent"></div>
            <button class="close-btn" onclick="closeModal()">Fechar</button>
        </div>
    </div>

    <script>
        // =====================================================================
        // DADOS EMBUTIDOS - COPSOQ II Vers√£o Curta Brasileira (40 itens)
        // =====================================================================

        const escalas = {
            frequencia: [
                { valor: 4, texto: "Sempre" },
                { valor: 3, texto: "Frequentemente" },
                { valor: 2, texto: "√Äs vezes" },
                { valor: 1, texto: "Raramente" },
                { valor: 0, texto: "Nunca" }
            ],
            frequencia_inv: [
                { valor: 0, texto: "Sempre" },
                { valor: 1, texto: "Frequentemente" },
                { valor: 2, texto: "√Äs vezes" },
                { valor: 3, texto: "Raramente" },
                { valor: 4, texto: "Nunca" }
            ],
            intensidade: [
                { valor: 4, texto: "Em grande parte" },
                { valor: 3, texto: "Em boa parte" },
                { valor: 2, texto: "De certa forma" },
                { valor: 1, texto: "Pouco" },
                { valor: 0, texto: "Muito pouco" }
            ],
            satisfacao: [
                { valor: 3, texto: "Muito satisfeito" },
                { valor: 2, texto: "Satisfeito" },
                { valor: 1, texto: "Insatisfeito" },
                { valor: 0, texto: "Muito insatisfeito" }
            ],
            conflito_tf: [
                { valor: 3, texto: "Sim, com certeza" },
                { valor: 2, texto: "Sim, at√© certo ponto" },
                { valor: 1, texto: "Sim, mas muito pouco" },
                { valor: 0, texto: "N√£o, realmente n√£o" }
            ],
            saude_geral: [
                { valor: 4, texto: "Excelente" },
                { valor: 3, texto: "Muito boa" },
                { valor: 2, texto: "Boa" },
                { valor: 1, texto: "Razo√°vel" },
                { valor: 0, texto: "Ruim" }
            ],
            comportamento_ofensivo: [
                { valor: 4, texto: "Sim, diariamente" },
                { valor: 3, texto: "Sim, semanalmente" },
                { valor: 2, texto: "Sim, mensalmente" },
                { valor: 1, texto: "Sim, poucas vezes" },
                { valor: 0, texto: "N√£o" }
            ],
            frequencia_pt: [
                { valor: 5, texto: "Sempre" },
                { valor: 4, texto: "Frequentemente" },
                { valor: 3, texto: "√Äs vezes" },
                { valor: 2, texto: "Raramente" },
                { valor: 1, texto: "Nunca/quase nunca" }
            ],
            intensidade_pt: [
                { valor: 5, texto: "Extremamente" },
                { valor: 4, texto: "Muito" },
                { valor: 3, texto: "De certa forma" },
                { valor: 2, texto: "Pouco" },
                { valor: 1, texto: "Nada/quase nada" }
            ]
        };

        const dominiosInfo = {
            "EL": { nome: "Exig√™ncias Laborais", icone: "‚ö°" },
            "OTC": { nome: "Organiza√ß√£o do Trabalho e Conte√∫do", icone: "üìã" },
            "RSL": { nome: "Rela√ß√µes Sociais e Lideran√ßa", icone: "üë•" },
            "ITI": { nome: "Interface Trabalho-Indiv√≠duo", icone: "‚öñÔ∏è" },
            "VLT": { nome: "Valores no Local de Trabalho", icone: "üíé" },
            "SBE": { nome: "Sa√∫de e Bem-Estar", icone: "‚ù§Ô∏è" },
            "CO": { nome: "Comportamentos Ofensivos", icone: "‚ö†Ô∏è" },
            "PER": { nome: "Personalidade", icone: "üß†" }
        };

        // Vers√£o Curta Brasileira - 40 itens
        const perguntasCurtaBR = [
            { codigoDominio: "EL", dimensao: "Exig√™ncias quantitativas", idPergunta: "EL_EQ_01A", ordem: 1, texto: "Voc√™ atrasa a entrega do seu trabalho?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias quantitativas", idPergunta: "EL_EQ_01B", ordem: 2, texto: "O tempo para realizar as suas tarefas no trabalho √© suficiente?", tipoEscala: "frequencia_inv", sinal: "protecao" },
            { codigoDominio: "EL", dimensao: "Ritmo de trabalho", idPergunta: "EL_RT_01A", ordem: 3, texto: "√â necess√°rio manter um ritmo acelerado no trabalho?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Ritmo de trabalho", idPergunta: "EL_RT_01B", ordem: 4, texto: "Voc√™ trabalha em ritmo acelerado ao longo de toda jornada?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias emocionais", idPergunta: "EL_EE_01A", ordem: 5, texto: "Seu trabalho coloca voc√™ em situa√ß√µes emocionalmente desgastantes?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias emocionais", idPergunta: "EL_EE_01B", ordem: 6, texto: "Voc√™ tem que lidar com os problemas pessoais de outras pessoas como parte do seu trabalho?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "OTC", dimensao: "Influ√™ncia no trabalho", idPergunta: "OTC_IT_01A", ordem: 7, texto: "Voc√™ tem um alto grau de influ√™ncia nas decis√µes sobre o seu trabalho?", tipoEscala: "frequencia", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Influ√™ncia no trabalho", idPergunta: "OTC_IT_01B", ordem: 8, texto: "Voc√™ pode interferir na quantidade de trabalho atribu√≠da a voc√™?", tipoEscala: "frequencia", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Possibilidades de desenvolvimento", idPergunta: "OTC_PD_01A", ordem: 9, texto: "Voc√™ tem a possibilidade de aprender coisas novas atrav√©s do seu trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Possibilidades de desenvolvimento", idPergunta: "OTC_PD_01B", ordem: 10, texto: "Seu trabalho exige que voc√™ tome iniciativas?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Significado do trabalho", idPergunta: "OTC_ST_01A", ordem: 11, texto: "Seu trabalho √© significativo?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Significado do trabalho", idPergunta: "OTC_ST_01B", ordem: 12, texto: "Voc√™ sente que o trabalho que faz √© importante?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Compromisso com local de trabalho", idPergunta: "OTC_CLT_01A", ordem: 13, texto: "Voc√™ sente que o seu local de trabalho √© muito importante para voc√™?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Compromisso com local de trabalho", idPergunta: "OTC_CLT_01B", ordem: 14, texto: "Voc√™ recomendaria a um amigo que se candidatasse a uma vaga no seu local de trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Previsibilidade", idPergunta: "RSL_PR_01A", ordem: 15, texto: "No seu local de trabalho, voc√™ √© informado antecipadamente sobre decis√µes importantes?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Previsibilidade", idPergunta: "RSL_PR_01B", ordem: 16, texto: "Voc√™ recebe toda a informa√ß√£o necess√°ria para fazer bem o seu trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Recompensas", idPergunta: "RSL_RE_01A", ordem: 17, texto: "O seu trabalho √© reconhecido e valorizado pelos seus superiores?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Recompensas", idPergunta: "RSL_RE_01B", ordem: 18, texto: "Voc√™ √© tratado de forma justa no seu local de trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Transpar√™ncia do papel", idPergunta: "RSL_TP_01A", ordem: 19, texto: "O seu trabalho tem objetivos/metas claros(as)?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Transpar√™ncia do papel", idPergunta: "RSL_TP_01B", ordem: 20, texto: "Voc√™ sabe exatamente o que se espera de voc√™ no trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Qualidade da lideran√ßa", idPergunta: "RSL_QL_01A", ordem: 21, texto: "O seu superior imediato d√° alta prioridade para a satisfa√ß√£o com trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Qualidade da lideran√ßa", idPergunta: "RSL_QL_01B", ordem: 22, texto: "O seu superior imediato √© bom no planejamento do trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de superiores", idPergunta: "RSL_ASS_01A", ordem: 23, texto: "Seu superior imediato est√° disposto a ouvir os seus problemas no trabalho?", tipoEscala: "frequencia", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de superiores", idPergunta: "RSL_ASS_01B", ordem: 24, texto: "Voc√™ recebe ajuda e suporte do seu superior imediato?", tipoEscala: "frequencia", sinal: "protecao" },
            { codigoDominio: "ITI", dimensao: "Satisfa√ß√£o no trabalho", idPergunta: "ITI_ST_01", ordem: 25, texto: "Qual o seu n√≠vel de satisfa√ß√£o com o seu trabalho como um todo?", tipoEscala: "satisfacao", sinal: "protecao" },
            { codigoDominio: "ITI", dimensao: "Conflito trabalho-fam√≠lia", idPergunta: "ITI_CTF_01A", ordem: 26, texto: "O seu trabalho consome tanto sua energia que tem efeito negativo na sua vida particular?", tipoEscala: "conflito_tf", sinal: "risco" },
            { codigoDominio: "ITI", dimensao: "Conflito trabalho-fam√≠lia", idPergunta: "ITI_CTF_01B", ordem: 27, texto: "O seu trabalho ocupa tanto tempo que tem efeito negativo na sua vida particular?", tipoEscala: "conflito_tf", sinal: "risco" },
            { codigoDominio: "VLT", dimensao: "Confian√ßa vertical", idPergunta: "VLT_CV_01A", ordem: 28, texto: "Voc√™ pode confiar nas informa√ß√µes que v√™m dos seus superiores?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Confian√ßa vertical", idPergunta: "VLT_CV_01B", ordem: 29, texto: "Os seus superiores confiam que os funcion√°rios far√£o bem seu trabalho?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Justi√ßa e respeito", idPergunta: "VLT_JR_01A", ordem: 30, texto: "Os conflitos s√£o resolvidos de forma justa?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Justi√ßa e respeito", idPergunta: "VLT_JR_01B", ordem: 31, texto: "O trabalho √© distribu√≠do de forma justa?", tipoEscala: "intensidade", sinal: "protecao" },
            { codigoDominio: "SBE", dimensao: "Sa√∫de geral", idPergunta: "SBE_SG_01", ordem: 32, texto: "Em geral, voc√™ diria que a sua sa√∫de √©:", tipoEscala: "saude_geral", sinal: "protecao" },
            { codigoDominio: "SBE", dimensao: "Burnout", idPergunta: "SBE_BO_01A", ordem: 33, texto: "Com que frequ√™ncia voc√™ tem se sentido fisicamente esgotado?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Burnout", idPergunta: "SBE_BO_01B", ordem: 34, texto: "Com que frequ√™ncia voc√™ tem se sentido emocionalmente esgotado?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Stress", idPergunta: "SBE_ST_01A", ordem: 35, texto: "Com que frequ√™ncia voc√™ tem se sentido estressado?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Stress", idPergunta: "SBE_ST_01B", ordem: 36, texto: "Com que frequ√™ncia voc√™ tem se sentido irritado?", tipoEscala: "frequencia", sinal: "risco" },
            { codigoDominio: "CO", dimensao: "Aten√ß√£o sexual indesejada", idPergunta: "CO_ASI_01", ordem: 37, texto: "Voc√™ foi exposto a aten√ß√£o sexual indesejada nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" },
            { codigoDominio: "CO", dimensao: "Amea√ßas de viol√™ncia", idPergunta: "CO_AV_01", ordem: 38, texto: "Voc√™ foi exposto a amea√ßas de viol√™ncia nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" },
            { codigoDominio: "CO", dimensao: "Viol√™ncia f√≠sica", idPergunta: "CO_VF_01", ordem: 39, texto: "Voc√™ foi exposto a viol√™ncia f√≠sica nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" },
            { codigoDominio: "CO", dimensao: "Bullying", idPergunta: "CO_BU_01", ordem: 40, texto: "Voc√™ foi exposto a bullying nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" }
        ];

        // Vers√£o M√©dia Portuguesa - 76 itens COMPLETOS
        const perguntasMediaPT = [
            // EL - Exig√™ncias Laborais (8 itens)
            { codigoDominio: "EL", dimensao: "Exig√™ncias quantitativas", idPergunta: "EL_EQ_01", ordem: 1, texto: "A sua carga de trabalho acumula-se por ser mal distribu√≠da?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias quantitativas", idPergunta: "EL_EQ_02", ordem: 2, texto: "Com que frequ√™ncia n√£o tem tempo para completar todas as tarefas?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias quantitativas", idPergunta: "EL_EQ_03", ordem: 3, texto: "Precisa fazer horas extra?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Ritmo de trabalho", idPergunta: "EL_RT_01", ordem: 4, texto: "Precisa trabalhar muito rapidamente?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias cognitivas", idPergunta: "EL_EC_01", ordem: 5, texto: "O seu trabalho exige a sua aten√ß√£o constante?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias cognitivas", idPergunta: "EL_EC_02", ordem: 6, texto: "O seu trabalho requer que tome decis√µes dif√≠ceis?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias cognitivas", idPergunta: "EL_EC_03", ordem: 7, texto: "O seu trabalho requer que seja bom a propor novas ideias?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "EL", dimensao: "Exig√™ncias emocionais", idPergunta: "EL_EE_01", ordem: 8, texto: "O seu trabalho √© emocionalmente exigente?", tipoEscala: "frequencia_pt", sinal: "risco" },
            // OTC - Organiza√ß√£o do Trabalho e Conte√∫do (12 itens)
            { codigoDominio: "OTC", dimensao: "Influ√™ncia no trabalho", idPergunta: "OTC_IT_01", ordem: 9, texto: "Tem influ√™ncia sobre a quantidade de trabalho que lhe compete?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Influ√™ncia no trabalho", idPergunta: "OTC_IT_02", ordem: 10, texto: "Tem influ√™ncia sobre o tipo de tarefas que faz?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Influ√™ncia no trabalho", idPergunta: "OTC_IT_03", ordem: 11, texto: "Tem influ√™ncia sobre a ordem de realiza√ß√£o das tarefas?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Influ√™ncia no trabalho", idPergunta: "OTC_IT_04", ordem: 12, texto: "Participa na escolha das pessoas com quem trabalha?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Possibilidades de desenvolvimento", idPergunta: "OTC_PD_01", ordem: 13, texto: "O seu trabalho exige que tenha iniciativa?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Possibilidades de desenvolvimento", idPergunta: "OTC_PD_02", ordem: 14, texto: "O seu trabalho permite-lhe aprender coisas novas?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Possibilidades de desenvolvimento", idPergunta: "OTC_PD_03", ordem: 15, texto: "O seu trabalho permite-lhe usar as suas compet√™ncias?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Significado do trabalho", idPergunta: "OTC_ST_01", ordem: 16, texto: "O seu trabalho tem significado para si?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Significado do trabalho", idPergunta: "OTC_ST_02", ordem: 17, texto: "Sente que o trabalho que faz √© importante?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Significado do trabalho", idPergunta: "OTC_ST_03", ordem: 18, texto: "Sente-se motivado e envolvido no seu trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Compromisso com local de trabalho", idPergunta: "OTC_CLT_01", ordem: 19, texto: "Gosta de falar sobre o seu local de trabalho com outras pessoas?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "OTC", dimensao: "Compromisso com local de trabalho", idPergunta: "OTC_CLT_02", ordem: 20, texto: "Sente que os problemas do seu local de trabalho s√£o seus tamb√©m?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            // RSL - Rela√ß√µes Sociais e Lideran√ßa (21 itens)
            { codigoDominio: "RSL", dimensao: "Previsibilidade", idPergunta: "RSL_PR_01", ordem: 21, texto: "√â informado com anteced√™ncia sobre decis√µes importantes?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Previsibilidade", idPergunta: "RSL_PR_02", ordem: 22, texto: "Recebe toda a informa√ß√£o de que necessita para fazer bem o trabalho?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Recompensas", idPergunta: "RSL_RE_01", ordem: 23, texto: "O seu trabalho √© reconhecido e apreciado pela chefia?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Recompensas", idPergunta: "RSL_RE_02", ordem: 24, texto: "A chefia do seu local de trabalho respeita-o(a)?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Recompensas", idPergunta: "RSL_RE_03", ordem: 25, texto: "√â tratado(a) de forma justa no seu local de trabalho?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Transpar√™ncia do papel", idPergunta: "RSL_TP_01", ordem: 26, texto: "O seu trabalho tem objetivos claros?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Transpar√™ncia do papel", idPergunta: "RSL_TP_02", ordem: 27, texto: "Sabe exatamente o que √© esperado de si no trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Transpar√™ncia do papel", idPergunta: "RSL_TP_03", ordem: 28, texto: "Sabe exatamente quais s√£o as suas responsabilidades?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Conflitos de pap√©is", idPergunta: "RSL_CP_01", ordem: 29, texto: "Faz coisas no trabalho que uns aceitam mas outros n√£o?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "RSL", dimensao: "Conflitos de pap√©is", idPergunta: "RSL_CP_02", ordem: 30, texto: "Por vezes tem de fazer coisas que deveriam ser feitas de outra forma?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "RSL", dimensao: "Conflitos de pap√©is", idPergunta: "RSL_CP_03", ordem: 31, texto: "Por vezes tem de fazer coisas que considera desnecess√°rias?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "RSL", dimensao: "Qualidade da lideran√ßa", idPergunta: "RSL_QL_01", ordem: 32, texto: "A sua chefia garante boas oportunidades de desenvolvimento?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Qualidade da lideran√ßa", idPergunta: "RSL_QL_02", ordem: 33, texto: "A sua chefia d√° prioridade √† satisfa√ß√£o no trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Qualidade da lideran√ßa", idPergunta: "RSL_QL_03", ordem: 34, texto: "A sua chefia √© boa a planear o trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Qualidade da lideran√ßa", idPergunta: "RSL_QL_04", ordem: 35, texto: "A sua chefia √© boa a resolver conflitos?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de superiores", idPergunta: "RSL_ASS_01", ordem: 36, texto: "Com que frequ√™ncia a sua chefia fala consigo sobre o seu trabalho?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de superiores", idPergunta: "RSL_ASS_02", ordem: 37, texto: "Com que frequ√™ncia tem ajuda e apoio da sua chefia?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de superiores", idPergunta: "RSL_ASS_03", ordem: 38, texto: "Com que frequ√™ncia a sua chefia fala sobre o seu desempenho?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de colegas", idPergunta: "RSL_ASC_01", ordem: 39, texto: "Com que frequ√™ncia tem ajuda e apoio dos colegas?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de colegas", idPergunta: "RSL_ASC_02", ordem: 40, texto: "Com que frequ√™ncia os colegas falam consigo sobre o seu desempenho?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            { codigoDominio: "RSL", dimensao: "Apoio social de colegas", idPergunta: "RSL_ASC_03", ordem: 41, texto: "Com que frequ√™ncia os colegas est√£o dispon√≠veis para o/a ouvir?", tipoEscala: "frequencia_pt", sinal: "protecao" },
            // ITI - Interface Trabalho-Indiv√≠duo (8 itens)
            { codigoDominio: "ITI", dimensao: "Inseguran√ßa laboral", idPergunta: "ITI_IL_01", ordem: 42, texto: "Sente-se preocupado(a) em ficar desempregado(a)?", tipoEscala: "intensidade_pt", sinal: "risco" },
            { codigoDominio: "ITI", dimensao: "Satisfa√ß√£o no trabalho", idPergunta: "ITI_ST_01", ordem: 43, texto: "Em rela√ß√£o ao seu trabalho em geral, qu√£o satisfeito(a) est√°?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "ITI", dimensao: "Satisfa√ß√£o no trabalho", idPergunta: "ITI_ST_02", ordem: 44, texto: "Qu√£o satisfeito est√° com as suas perspetivas de trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "ITI", dimensao: "Satisfa√ß√£o no trabalho", idPergunta: "ITI_ST_03", ordem: 45, texto: "Qu√£o satisfeito est√° com as condi√ß√µes f√≠sicas do local de trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "ITI", dimensao: "Satisfa√ß√£o no trabalho", idPergunta: "ITI_ST_04", ordem: 46, texto: "Qu√£o satisfeito est√° com a forma como as suas capacidades s√£o utilizadas?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "ITI", dimensao: "Conflito trabalho-fam√≠lia", idPergunta: "ITI_CTF_01", ordem: 47, texto: "O seu trabalho exige muita energia, afetando a sua vida privada?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "ITI", dimensao: "Conflito trabalho-fam√≠lia", idPergunta: "ITI_CTF_02", ordem: 48, texto: "O seu trabalho exige muito tempo, afetando a sua vida privada?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "ITI", dimensao: "Conflito trabalho-fam√≠lia", idPergunta: "ITI_CTF_03", ordem: 49, texto: "A sua fam√≠lia e amigos dizem que trabalha demais?", tipoEscala: "frequencia_pt", sinal: "risco" },
            // VLT - Valores no Local de Trabalho (12 itens)
            { codigoDominio: "VLT", dimensao: "Confian√ßa vertical", idPergunta: "VLT_CV_01", ordem: 50, texto: "A chefia confia nos trabalhadores para fazerem bem o trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Confian√ßa vertical", idPergunta: "VLT_CV_02", ordem: 51, texto: "Confia na informa√ß√£o da chefia?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Confian√ßa vertical", idPergunta: "VLT_CV_03", ordem: 52, texto: "A chefia esconde informa√ß√£o dos trabalhadores?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "VLT", dimensao: "Confian√ßa horizontal", idPergunta: "VLT_CH_01", ordem: 53, texto: "Os trabalhadores escondem informa√ß√£o uns dos outros?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "VLT", dimensao: "Confian√ßa horizontal", idPergunta: "VLT_CH_02", ordem: 54, texto: "Os trabalhadores escondem informa√ß√£o da chefia?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "VLT", dimensao: "Confian√ßa horizontal", idPergunta: "VLT_CH_03", ordem: 55, texto: "Confia nos seus colegas de trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Justi√ßa e respeito", idPergunta: "VLT_JR_01", ordem: 56, texto: "Os conflitos s√£o resolvidos de forma justa?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Justi√ßa e respeito", idPergunta: "VLT_JR_02", ordem: 57, texto: "As sugest√µes dos trabalhadores s√£o tratadas com seriedade?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Justi√ßa e respeito", idPergunta: "VLT_JR_03", ordem: 58, texto: "O trabalho √© distribu√≠do de forma justa?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Comunidade social no trabalho", idPergunta: "VLT_CST_01", ordem: 59, texto: "H√° um bom ambiente entre colegas?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Comunidade social no trabalho", idPergunta: "VLT_CST_02", ordem: 60, texto: "H√° boa coopera√ß√£o entre os colegas?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "VLT", dimensao: "Comunidade social no trabalho", idPergunta: "VLT_CST_03", ordem: 61, texto: "Sente-se parte de uma comunidade no local de trabalho?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            // PER - Personalidade (2 itens)
            { codigoDominio: "PER", dimensao: "Auto-efic√°cia", idPergunta: "PER_AE_01", ordem: 62, texto: "√â capaz de resolver a maioria dos problemas se se esfor√ßar?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "PER", dimensao: "Auto-efic√°cia", idPergunta: "PER_AE_02", ordem: 63, texto: "Consegue sempre resolver problemas dif√≠ceis se tentar o suficiente?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            // SBE - Sa√∫de e Bem-Estar (9 itens)
            { codigoDominio: "SBE", dimensao: "Sa√∫de geral", idPergunta: "SBE_SG_01", ordem: 64, texto: "Em geral, como descreveria a sua sa√∫de?", tipoEscala: "intensidade_pt", sinal: "protecao" },
            { codigoDominio: "SBE", dimensao: "Stress", idPergunta: "SBE_ST_01", ordem: 65, texto: "Com que frequ√™ncia se sentiu stressado(a)?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Stress", idPergunta: "SBE_ST_02", ordem: 66, texto: "Com que frequ√™ncia se sentiu tenso(a) ou nervoso(a)?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Burnout", idPergunta: "SBE_BO_01", ordem: 67, texto: "Com que frequ√™ncia se sentiu fisicamente exausto(a)?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Burnout", idPergunta: "SBE_BO_02", ordem: 68, texto: "Com que frequ√™ncia se sentiu emocionalmente exausto(a)?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Problemas em dormir", idPergunta: "SBE_PD_01", ordem: 69, texto: "Com que frequ√™ncia teve dificuldades em adormecer?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Problemas em dormir", idPergunta: "SBE_PD_02", ordem: 70, texto: "Com que frequ√™ncia acordou v√°rias vezes durante a noite?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Sintomas depressivos", idPergunta: "SBE_SD_01", ordem: 71, texto: "Com que frequ√™ncia se sentiu triste?", tipoEscala: "frequencia_pt", sinal: "risco" },
            { codigoDominio: "SBE", dimensao: "Sintomas depressivos", idPergunta: "SBE_SD_02", ordem: 72, texto: "Com que frequ√™ncia sentiu falta de interesse pelas coisas?", tipoEscala: "frequencia_pt", sinal: "risco" },
            // CO - Comportamentos Ofensivos (4 itens)
            { codigoDominio: "CO", dimensao: "Aten√ß√£o sexual indesejada", idPergunta: "CO_ASI_01", ordem: 73, texto: "Foi exposto(a) a aten√ß√£o sexual indesejada nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" },
            { codigoDominio: "CO", dimensao: "Amea√ßas de viol√™ncia", idPergunta: "CO_AV_01", ordem: 74, texto: "Foi exposto(a) a amea√ßas de viol√™ncia nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" },
            { codigoDominio: "CO", dimensao: "Viol√™ncia f√≠sica", idPergunta: "CO_VF_01", ordem: 75, texto: "Foi exposto(a) a viol√™ncia f√≠sica nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" },
            { codigoDominio: "CO", dimensao: "Bullying", idPergunta: "CO_BU_01", ordem: 76, texto: "Foi exposto(a) a bullying nos √∫ltimos 12 meses?", tipoEscala: "comportamento_ofensivo", sinal: "risco" }
        ];

        // =====================================================================
        // Estado da Aplica√ß√£o
        // =====================================================================

        let perguntas = [...perguntasCurtaBR];
        let respostas = {};
        let mode = 'local';

        // =====================================================================
        // Fun√ß√µes de Interface
        // =====================================================================

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');

            if (tabName === 'data') {
                updateJsonDisplay();
            }
        }

        function setMode() {
            mode = document.getElementById('modeSelect').value;
            document.getElementById('apiConfig').style.display = mode === 'api' ? 'flex' : 'none';
        }

        function loadVersion() {
            const version = document.getElementById('versionSelect').value;
            perguntas = version === 'curta_br' ? [...perguntasCurtaBR] : [...perguntasMediaPT];
            respostas = {};
            renderQuestionnaire();
            updateProgress();
            showToast(`Carregados ${perguntas.length} itens`, 'info');
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // =====================================================================
        // Renderiza√ß√£o
        // =====================================================================

        function renderQuestionnaire() {
            const container = document.getElementById('questionnaire');
            const dominios = {};

            perguntas.forEach(p => {
                if (!dominios[p.codigoDominio]) dominios[p.codigoDominio] = [];
                dominios[p.codigoDominio].push(p);
            });

            let html = '';
            for (const [codigo, perguntasDominio] of Object.entries(dominios)) {
                const info = dominiosInfo[codigo] || { nome: codigo, icone: 'üìù' };
                html += `
                    <div class="domain-section">
                        <div class="domain-header">
                            <div class="domain-icon domain-${codigo}">${info.icone}</div>
                            <div class="domain-info">
                                <h2>${info.nome}</h2>
                                <span>${perguntasDominio.length} perguntas</span>
                            </div>
                        </div>
                        ${perguntasDominio.map(p => renderQuestion(p)).join('')}
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        function renderQuestion(p) {
            const opcoes = escalas[p.tipoEscala] || escalas.frequencia;
            return `
                <div class="question-card" id="card_${p.idPergunta}">
                    <div class="question-meta">
                        <span class="question-number">P${p.ordem}</span>
                        <span class="dimension-tag">${p.dimensao}</span>
                    </div>
                    <p class="question-text">${p.texto}</p>
                    <div class="options">
                        ${opcoes.map((o, i) => `
                            <div class="option">
                                <input type="radio" id="${p.idPergunta}_${i}" name="${p.idPergunta}" 
                                       value="${o.valor}" onchange="handleAnswer('${p.idPergunta}', ${o.valor})">
                                <label for="${p.idPergunta}_${i}">${o.texto}</label>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function handleAnswer(idPergunta, valor) {
            respostas[idPergunta] = valor;
            document.getElementById(`card_${idPergunta}`).classList.add('answered');
            updateProgress();
            updatePayloadDisplay();
        }

        function updateProgress() {
            const total = perguntas.length;
            const respondidas = Object.keys(respostas).length;
            const percent = Math.round((respondidas / total) * 100);

            document.getElementById('progressFill').style.width = `${percent}%`;
            document.getElementById('progressText').textContent = `${respondidas} de ${total} perguntas respondidas`;
            document.getElementById('progressPercent').textContent = `${percent}%`;
        }

        function updateJsonDisplay() {
            const version = document.getElementById('versionSelect').value;
            const data = {
                questionario: {
                    codigo: version === 'curta_br' ? 'COPSOQ_CURTA_BR' : 'COPSOQ_MEDIA_PT',
                    nome: version === 'curta_br' ? 'COPSOQ II - Vers√£o Curta Brasileira' : 'COPSOQ II - Vers√£o M√©dia Portuguesa',
                    totalPerguntas: perguntas.length
                },
                perguntas: perguntas.slice(0, 3).map(p => ({
                    idPergunta: p.idPergunta,
                    texto: p.texto.substring(0, 50) + '...',
                    tipoEscala: p.tipoEscala,
                    sinal: p.sinal
                })),
                _nota: `... e mais ${perguntas.length - 3} perguntas`
            };
            document.getElementById('jsonDisplay').textContent = JSON.stringify(data, null, 2);
        }

        function updatePayloadDisplay() {
            const payload = {
                idQuestionario: "ObjectId(...)",
                anonId: "TEST_" + Date.now(),
                respostas: Object.entries(respostas).map(([idPergunta, valor]) => ({
                    idPergunta,
                    valor
                }))
            };
            document.getElementById('payloadDisplay').textContent = JSON.stringify(payload, null, 2);
        }

        // =====================================================================
        // Preenchimento Autom√°tico
        // =====================================================================

        function autoFillRandom() {
            perguntas.forEach(p => {
                const opcoes = escalas[p.tipoEscala] || escalas.frequencia;
                const randomIndex = Math.floor(Math.random() * opcoes.length);
                const valor = opcoes[randomIndex].valor;
                respostas[p.idPergunta] = valor;

                const radio = document.querySelector(`input[name="${p.idPergunta}"][value="${valor}"]`);
                if (radio) {
                    radio.checked = true;
                    document.getElementById(`card_${p.idPergunta}`).classList.add('answered');
                }
            });
            updateProgress();
            updatePayloadDisplay();
            showToast('Preenchido com valores aleat√≥rios!', 'success');
        }

        function autoFillMiddle() {
            perguntas.forEach(p => {
                const opcoes = escalas[p.tipoEscala] || escalas.frequencia;
                const middleIndex = Math.floor(opcoes.length / 2);
                const valor = opcoes[middleIndex].valor;
                respostas[p.idPergunta] = valor;

                const radio = document.querySelector(`input[name="${p.idPergunta}"][value="${valor}"]`);
                if (radio) {
                    radio.checked = true;
                    document.getElementById(`card_${p.idPergunta}`).classList.add('answered');
                }
            });
            updateProgress();
            updatePayloadDisplay();
            showToast('Preenchido com valores intermedi√°rios!', 'success');
        }

        function clearAll() {
            respostas = {};
            document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
            document.querySelectorAll('.question-card').forEach(c => c.classList.remove('answered'));
            updateProgress();
            updatePayloadDisplay();
            showToast('Respostas limpas!', 'info');
        }

        // =====================================================================
        // API / Backend
        // =====================================================================

        async function testAPI() {
            const url = document.getElementById('apiUrl').value.replace('/api/v1', '') + '/health';
            try {
                const response = await fetch(url);
                if (response.ok) {
                    showToast('API conectada!', 'success');
                } else {
                    throw new Error('Health check failed');
                }
            } catch (error) {
                showToast('Erro: ' + error.message, 'error');
            }
        }

        // =====================================================================
        // Resultados
        // =====================================================================

        function submitQuestionnaire() {
            const respondidas = Object.keys(respostas).length;
            const total = perguntas.length;

            if (respondidas < total) {
                showToast(`Faltam ${total - respondidas} perguntas!`, 'error');
                return;
            }

            calculateResults();
        }

        function calculateResults() {
            const resultados = {};

            for (const codigo of Object.keys(dominiosInfo)) {
                resultados[codigo] = { soma: 0, count: 0, max: 0 };
            }

            perguntas.forEach(p => {
                if (respostas[p.idPergunta] !== undefined) {
                    const opcoes = escalas[p.tipoEscala] || escalas.frequencia;
                    resultados[p.codigoDominio].soma += respostas[p.idPergunta];
                    resultados[p.codigoDominio].count++;
                    resultados[p.codigoDominio].max += Math.max(...opcoes.map(o => o.valor));
                }
            });

            let html = '';
            for (const [codigo, dados] of Object.entries(resultados)) {
                if (dados.count === 0) continue;

                const info = dominiosInfo[codigo];
                const media = (dados.soma / dados.count).toFixed(2);
                const percentual = Math.round((dados.soma / dados.max) * 100);

                html += `
                    <div class="result-item">
                        <span>${info.icone} ${info.nome}</span>
                        <span class="result-score">${media} (${percentual}%)</span>
                    </div>
                `;
            }

            document.getElementById('resultSubtitle').textContent = `${Object.keys(respostas).length} respostas processadas`;
            document.getElementById('resultsContent').innerHTML = html;
            document.getElementById('resultsModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('resultsModal').classList.remove('active');
        }

        // =====================================================================
        // Inicializa√ß√£o
        // =====================================================================

        document.addEventListener('DOMContentLoaded', () => {
            renderQuestionnaire();
            updateProgress();
        });
    </script>
</body>

</html>